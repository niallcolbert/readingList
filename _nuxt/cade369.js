(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{552:function(t,e,r){"use strict";r.r(e);var o=r(37),n=(r(106),r(1),r(53),r(56),r(549),r(350),r(15),r(80),r(133),r(28),r(550)),l=r.n(n),c={name:"ImportExportList",data:function(){return{pantryId:"",basketName:"",loading:!1,showErrorAlert:!1,showSuccessAlert:!1,alertText:""}},methods:{exportToYAML:function(){var t=l.a.stringify(this.$store.state.booklist);this.downloadToFile(t)},downloadToFile:function(t){var a=document.createElement("a"),e=new Blob([t],{type:"text/yaml"});a.href=URL.createObjectURL(e),a.download="readinglist.yaml",a.click(),URL.revokeObjectURL(a.href)},exportToPantry:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,r={headers:{"Content-Type":"application/json"}},o=JSON.stringify(t.$store.state.booklist),e.next=5,t.$axios.$post("https://getpantry.cloud/apiv1/pantry/".concat(t.pantryId,"/basket/").concat(t.basketName),o,r).then((function(e){t.loading=!1,t.showSuccessAlert=!0,t.alertText="Good news! Your list has successfully been exported to you Pantry Basket."})).catch((function(e){t.loading=!1,t.showErrorAlert=!0,t.alertText="Unfortunately we were unable to export your list to your Pantry Basket. Please verify the details you have entered and try again.",console.log(e)}));case 5:case"end":return e.stop()}}),e)})))()},importFromYaml:function(){var t=this,e=this.$refs.doc.files[0],r=new FileReader;e.name.includes(".yaml")?(r.onload=function(e){var content=e.target.result;t.commitImportToStore(l.a.parse(content).books)},r.onerror=function(t){return console.log(t)},r.readAsText(e)):console.log("invalid file type")},importFromPantry:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("https://getpantry.cloud/apiv1/pantry/".concat(t.pantryId,"/basket/").concat(t.basketName)).then((function(e){t.commitImportToStore(e.books),t.loading=!1,t.showSuccessAlert=!0,t.alertText="Good news! Your list has successfully been imported from Pantry."})).catch((function(e){t.loading=!1,t.showErrorAlert=!0,t.alertText="Unfortunately we were unable to import data from Pantry. Please verify the details you have entered and try again.",console.log(e)}));case 2:case"end":return e.stop()}}),e)})))()},commitImportToStore:function(t){this.$store.commit("IMPORT_BOOKLIST",t),location.reload()}}},m=r(79),component=Object(m.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"toggleCollapse",attrs:{variant:"primary"}},[t._v("Import/Export Reading List")]),t._v(" "),e("b-collapse",{attrs:{id:"collapse-1"}},[e("b-card",{attrs:{"no-body":""}},[e("b-tabs",{attrs:{card:""}},[e("b-tab",{attrs:{title:"YAML",active:""}},[e("b-card-text",[e("b-button",{staticClass:"mb-3 exportToYAML",attrs:{variant:"primary"},on:{click:t.exportToYAML}},[t._v("Export to YAML")]),t._v(" "),e("br"),t._v(" "),e("b-form-group",{attrs:{label:"Import from YAML:","label-cols-sm":"2"}},[e("input",{ref:"doc",attrs:{type:"file"},on:{change:function(e){return t.importFromYaml()}}})])],1)],1),t._v(" "),e("b-tab",{attrs:{title:"Pantry"}},[e("b-overlay",{attrs:{show:t.loading,rounded:"sm"}},[e("b-card-text",[e("b-form-group",{attrs:{label:"Pantry ID:","label-cols-sm":"2"}},[e("b-form-input",{attrs:{placeholder:"Pantry ID"},model:{value:t.pantryId,callback:function(e){t.pantryId=e},expression:"pantryId"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Basket Name:","label-cols-sm":"2"}},[e("b-form-input",{attrs:{placeholder:"Basket Name"},model:{value:t.basketName,callback:function(e){t.basketName=e},expression:"basketName"}})],1),t._v(" "),e("b-button",{staticClass:"mb-3 exportToPantry",attrs:{variant:"primary"},on:{click:t.exportToPantry}},[t._v("Export to Pantry")]),t._v(" "),e("b-button",{staticClass:"mb-3 importFromPantry",attrs:{variant:"primary"},on:{click:t.importFromPantry}},[t._v("Import from Pantry")]),t._v(" "),e("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showErrorAlert,callback:function(e){t.showErrorAlert=e},expression:"showErrorAlert"}},[t._v("\n                  "+t._s(t.alertText)+"\n                ")]),t._v(" "),e("b-alert",{attrs:{variant:"success",dismissible:""},model:{value:t.showSuccessAlert,callback:function(e){t.showSuccessAlert=e},expression:"showSuccessAlert"}},[t._v("\n                  "+t._s(t.alertText)+"\n                ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);