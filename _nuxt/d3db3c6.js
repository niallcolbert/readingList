(window.webpackJsonp=window.webpackJsonp||[]).push([[9,5,6,7,8],{546:function(t,o,e){"use strict";e.r(o);var r=e(548),n={name:"Book",props:["book","status","rating","statuses"],components:{StarRating:e.n(r).a},data:function(){return{isbn:"",title:"",author:"",editMode:!1,statusClasses:["btn-secondary","btn-info","btn-success"]}},created:function(){this.initValues()},methods:{removeBook:function(){this.$store.commit("REMOVE_BOOK",this.book)},updateBookStatus:function(t){this.$store.commit("UPDATE_BOOK_STATUS",{book:this.book,status:t})},updateBookRating:function(t){this.$store.commit("UPDATE_BOOK_RATING",{book:this.book,rating:t})},updateBookDetails:function(){this.$store.commit("UPDATE_BOOK_DETAILS",{book:this.book,title:this.title,author:this.author,isbn:this.isbn}),this.toggleEditMode()},initValues:function(){this.isbn=this.book.isbn,this.title=this.book.title,this.author=this.book.author},toggleEditMode:function(){this.editMode=!this.editMode,this.initValues()}}},l=e(79),component=Object(l.a)(n,(function(){var t=this,o=t._self._c;return o("b-card",{staticClass:"mb-2 p-5"},[t.editMode?o("div",[o("b-card-text",[o("b-form-group",{attrs:{label:"Title:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"Title"},model:{value:t.title,callback:function(o){t.title=o},expression:"title"}})],1),t._v(" "),o("b-form-group",{attrs:{label:"Author:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"Author"},model:{value:t.author,callback:function(o){t.author=o},expression:"author"}})],1),t._v(" "),o("b-form-group",{attrs:{label:"ISBN:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"ISBN"},model:{value:t.isbn,callback:function(o){t.isbn=o},expression:"isbn"}})],1),t._v(" "),o("b-button",{staticClass:"mb-3 updateDetails",attrs:{variant:"primary"},on:{click:t.updateBookDetails}},[t._v("Update book details")])],1)],1):o("div",[o("p",{staticClass:"title"},[t._v("\n      Title: "+t._s(t.book.title)+"\n    ")]),t._v(" "),o("p",{staticClass:"author"},[t._v("\n      Author: "+t._s(t.book.author)+"\n    ")]),t._v(" "),o("p",{staticClass:"isbn"},[t._v("\n      ISBN: "+t._s(t.book.isbn)+"\n    ")])]),t._v(" "),o("span",{staticClass:"position-absolute m-2",staticStyle:{top:"0",right:"0"}},[o("star-rating",{attrs:{rating:t.rating,inline:!0,"star-size":25,"show-rating":!1},on:{"rating-selected":t.updateBookRating}}),t._v(" "),o("span",{staticClass:"btn disabled",class:t.statusClasses[t.status]},[t._v("\n        Status: "+t._s(t.statuses[t.status])+"\n    ")])],1),t._v(" "),o("b-button-toolbar",{attrs:{"aria-label":"Toolbar with button groups and dropdown menu"}},[o("b-button-group",{staticClass:"mb-3"},[o("b-button",{staticClass:"updateStatus",attrs:{variant:"secondary",disabled:0===t.status},on:{click:function(o){return t.updateBookStatus(0)}}},[t._v("Change status to Unread")]),t._v(" "),o("b-button",{staticClass:"updateStatus",attrs:{variant:"info",disabled:1===t.status},on:{click:function(o){return t.updateBookStatus(1)}}},[t._v("Change status to In Progress")]),t._v(" "),o("b-button",{staticClass:"updateStatus",attrs:{variant:"success",disabled:2===t.status},on:{click:function(o){return t.updateBookStatus(2)}}},[t._v("Change status to Finished")])],1),t._v(" "),o("b-button-group",{staticClass:"mb-3 ml-3"},[o("b-button",{staticClass:"toggleEditMode",attrs:{variant:"warning"},on:{click:t.toggleEditMode}},[t.editMode?o("span",[t._v("Leave Edit Mode")]):o("span",[t._v("Enter Edit Mode")])]),t._v(" "),o("b-button",{staticClass:"removeBook",attrs:{variant:"danger"},on:{click:t.removeBook}},[t._v("Delete")])],1)],1)],1)}),[],!1,null,null,null);o.default=component.exports},552:function(t,o,e){"use strict";e.r(o);var r=e(37),n=(e(106),e(1),e(53),e(56),e(549),e(350),e(15),e(80),e(133),e(28),e(550)),l=e.n(n),c={name:"ImportExportList",data:function(){return{pantryId:"",basketName:"",loading:!1,showErrorAlert:!1,showSuccessAlert:!1,alertText:""}},methods:{exportToYAML:function(){var t=l.a.stringify(this.$store.state.booklist);this.downloadToFile(t)},downloadToFile:function(t){var a=document.createElement("a"),o=new Blob([t],{type:"text/yaml"});a.href=URL.createObjectURL(o),a.download="readinglist.yaml",a.click(),URL.revokeObjectURL(a.href)},exportToPantry:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var e,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading=!0,e={headers:{"Content-Type":"application/json"}},r=JSON.stringify(t.$store.state.booklist),o.next=5,t.$axios.$post("https://getpantry.cloud/apiv1/pantry/".concat(t.pantryId,"/basket/").concat(t.basketName),r,e).then((function(o){t.loading=!1,t.showSuccessAlert=!0,t.alertText="Good news! Your list has successfully been exported to you Pantry Basket."})).catch((function(o){t.loading=!1,t.showErrorAlert=!0,t.alertText="Unfortunately we were unable to export your list to your Pantry Basket. Please verify the details you have entered and try again.",console.log(o)}));case 5:case"end":return o.stop()}}),o)})))()},importFromYaml:function(){var t=this,o=this.$refs.doc.files[0],e=new FileReader;o.name.includes(".yaml")?(e.onload=function(o){var content=o.target.result;t.commitImportToStore(l.a.parse(content).books)},e.onerror=function(t){return console.log(t)},e.readAsText(o)):console.log("invalid file type")},importFromPantry:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.$axios.$get("https://getpantry.cloud/apiv1/pantry/".concat(t.pantryId,"/basket/").concat(t.basketName)).then((function(o){t.commitImportToStore(o.books),t.loading=!1,t.showSuccessAlert=!0,t.alertText="Good news! Your list has successfully been imported from Pantry."})).catch((function(o){t.loading=!1,t.showErrorAlert=!0,t.alertText="Unfortunately we were unable to import data from Pantry. Please verify the details you have entered and try again.",console.log(o)}));case 2:case"end":return o.stop()}}),o)})))()},commitImportToStore:function(t){this.$store.commit("IMPORT_BOOKLIST",t),location.reload()}}},d=e(79),component=Object(d.a)(c,(function(){var t=this,o=t._self._c;return o("div",{staticClass:"mb-3"},[o("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"toggleCollapse",attrs:{variant:"primary"}},[t._v("Import/Export Reading List")]),t._v(" "),o("b-collapse",{attrs:{id:"collapse-1"}},[o("b-card",{attrs:{"no-body":""}},[o("b-tabs",{attrs:{card:""}},[o("b-tab",{attrs:{title:"YAML",active:""}},[o("b-card-text",[o("b-button",{staticClass:"mb-3 exportToYAML",attrs:{variant:"primary"},on:{click:t.exportToYAML}},[t._v("Export to YAML")]),t._v(" "),o("br"),t._v(" "),o("b-form-group",{attrs:{label:"Import from YAML:","label-cols-sm":"2"}},[o("input",{ref:"doc",attrs:{type:"file"},on:{change:function(o){return t.importFromYaml()}}})])],1)],1),t._v(" "),o("b-tab",{attrs:{title:"Pantry"}},[o("b-overlay",{attrs:{show:t.loading,rounded:"sm"}},[o("b-card-text",[o("b-form-group",{attrs:{label:"Pantry ID:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"Pantry ID"},model:{value:t.pantryId,callback:function(o){t.pantryId=o},expression:"pantryId"}})],1),t._v(" "),o("b-form-group",{attrs:{label:"Basket Name:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"Basket Name"},model:{value:t.basketName,callback:function(o){t.basketName=o},expression:"basketName"}})],1),t._v(" "),o("b-button",{staticClass:"mb-3 exportToPantry",attrs:{variant:"primary"},on:{click:t.exportToPantry}},[t._v("Export to Pantry")]),t._v(" "),o("b-button",{staticClass:"mb-3 importFromPantry",attrs:{variant:"primary"},on:{click:t.importFromPantry}},[t._v("Import from Pantry")]),t._v(" "),o("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showErrorAlert,callback:function(o){t.showErrorAlert=o},expression:"showErrorAlert"}},[t._v("\n                  "+t._s(t.alertText)+"\n                ")]),t._v(" "),o("b-alert",{attrs:{variant:"success",dismissible:""},model:{value:t.showSuccessAlert,callback:function(o){t.showSuccessAlert=o},expression:"showSuccessAlert"}},[t._v("\n                  "+t._s(t.alertText)+"\n                ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);o.default=component.exports},553:function(t,o,e){"use strict";e.r(o);var r=e(37),n=(e(28),e(106),{name:"AddBook",data:function(){return{isbn:"",title:"",author:"",loading:!1,showErrorAlert:!1,alertText:""}},methods:{getBook:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading=!0,o.next=3,t.$axios.$get("https://openlibrary.org/isbn/".concat(t.isbn,".json")).then((function(o){t.updateBook(o,t.isbn)})).catch((function(o){t.loading=!1,t.showErrorAlert=!0,t.alertText="Unfortunately we could not find book details for the given ISBN. Please enter the details manually or try again later.",console.log(o)}));case 3:case"end":return o.stop()}}),o)})))()},updateBook:function(data,t){data.authors?this.getAuthor(data.authors):(this.loading=!1,this.showErrorAlert=!0,this.alertText="We have found the title of your book but unfortunately could not retrieve the author."),this.title=data.title},getAuthor:function(t){var o=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.$axios.$get("https://openlibrary.org".concat(t[0].key,".json")).then((function(t){o.author=t.name,o.loading=!1})).catch((function(t){o.loading=!1,o.showErrorAlert=!0,o.alertText="We have found the title of your book but unfortunately could not retrieve the author.",console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},addBook:function(){var t={isbn:this.isbn,title:this.title,author:this.author};this.$store.commit("ADD_BOOK",t)}}}),l=e(79),component=Object(l.a)(n,(function(){var t=this,o=t._self._c;return o("b-overlay",{attrs:{show:t.loading,rounded:"sm"}},[o("b-card",{staticClass:"mb-3"},[o("b-card-text",[o("b-form-group",{attrs:{label:"ISBN:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"ISBN"},model:{value:t.isbn,callback:function(o){t.isbn=o},expression:"isbn"}}),t._v(" "),o("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showErrorAlert,callback:function(o){t.showErrorAlert=o},expression:"showErrorAlert"}},[t._v("\n          "+t._s(t.alertText)+"\n        ")]),t._v(" "),o("b-button",{staticClass:"float-right mt-2 getBook",attrs:{variant:"secondary",disabled:!t.isbn},on:{click:t.getBook}},[t._v("Get book details")])],1),t._v(" "),o("b-form-group",{attrs:{label:"Title:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"Title"},model:{value:t.title,callback:function(o){t.title=o},expression:"title"}})],1),t._v(" "),o("b-form-group",{attrs:{label:"Author:","label-cols-sm":"2"}},[o("b-form-input",{attrs:{placeholder:"Author"},model:{value:t.author,callback:function(o){t.author=o},expression:"author"}})],1),t._v(" "),o("b-button",{staticClass:"mb-3 addBook",attrs:{variant:"primary"},on:{click:t.addBook}},[t._v("Add Book")])],1)],1)],1)}),[],!1,null,null,null);o.default=component.exports},554:function(t,o,e){"use strict";e.r(o);var r={name:"BookList",data:function(){return{statuses:["Unread","In Progress","Finished"],books:this.$store.state.booklist.books,sortBy:this.$store.state.booklist.sortBy}},methods:{sortBooks:function(t){this.sortBy=t,this.$store.commit("SORT_BOOKS",t)},reverseSortDirection:function(){this.$store.commit("TOGGLE_SORT_DIRECTION")}}},n=e(79),component=Object(n.a)(r,(function(){var t=this,o=t._self._c;return o("b-card",[o("b-button-toolbar",{attrs:{"aria-label":"Toolbar with button groups and dropdown menu"}},[o("b-button-group",{staticClass:"mb-3"},[o("b-button",{staticClass:"sortBooks",attrs:{variant:"success",disabled:"title"===t.sortBy},on:{click:function(o){return t.sortBooks("title")}}},[t._v("Sort by title")]),t._v(" "),o("b-button",{staticClass:"sortBooks",attrs:{variant:"info",disabled:"author"===t.sortBy},on:{click:function(o){return t.sortBooks("author")}}},[t._v("Sort by author")]),t._v(" "),o("b-button",{staticClass:"sortBooks",attrs:{variant:"warning",disabled:"rating"===t.sortBy},on:{click:function(o){return t.sortBooks("rating")}}},[t._v("Sort by rating")]),t._v(" "),o("b-button",{staticClass:"sortBooks",attrs:{variant:"danger",disabled:"isbn"===t.sortBy},on:{click:function(o){return t.sortBooks("isbn")}}},[t._v("Sort by ISBN")]),t._v(" "),o("b-button",{staticClass:"sortBooks",attrs:{variant:"primary",disabled:"status"===t.sortBy},on:{click:function(o){return t.sortBooks("status")}}},[t._v("Sort by status")])],1),t._v(" "),o("b-button-group",{staticClass:"mb-3 ml-3"},[o("b-button",{staticClass:"reverseSortDirection",attrs:{variant:"primary"},on:{click:function(o){return t.reverseSortDirection()}}},[t._v("Asc/Desc")])],1)],1),t._v(" "),o("div",{staticClass:"booklist"},t._l(t.books,(function(e,i){return o("Book",{key:i,attrs:{book:e,status:e.status,rating:e.rating,statuses:t.statuses}})})),1)],1)}),[],!1,null,null,null);o.default=component.exports;installComponents(component,{Book:e(546).default})},558:function(t,o,e){"use strict";e.r(o);var r={name:"IndexPage"},n=e(79),component=Object(n.a)(r,(function(){var t=this,o=t._self._c;return o("main",{staticClass:"m-3"},[o("ImportExportList"),t._v(" "),o("AddBook"),t._v(" "),o("Booklist")],1)}),[],!1,null,null,null);o.default=component.exports;installComponents(component,{ImportExportList:e(552).default,AddBook:e(553).default,Booklist:e(554).default})}}]);