(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{553:function(t,e,o){"use strict";o.r(e);var r=o(37),n=(o(28),o(106),{name:"AddBook",data:function(){return{isbn:"",title:"",author:"",loading:!1,showErrorAlert:!1,alertText:""}},methods:{getBook:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.$get("https://openlibrary.org/isbn/".concat(t.isbn,".json")).then((function(e){t.updateBook(e,t.isbn)})).catch((function(e){t.loading=!1,t.showErrorAlert=!0,t.alertText="Unfortunately we could not find book details for the given ISBN. Please enter the details manually or try again later.",console.log(e)}));case 3:case"end":return e.stop()}}),e)})))()},updateBook:function(data,t){data.authors?this.getAuthor(data.authors):(this.loading=!1,this.showErrorAlert=!0,this.alertText="We have found the title of your book but unfortunately could not retrieve the author."),this.title=data.title},getAuthor:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$axios.$get("https://openlibrary.org".concat(t[0].key,".json")).then((function(t){e.author=t.name,e.loading=!1})).catch((function(t){e.loading=!1,e.showErrorAlert=!0,e.alertText="We have found the title of your book but unfortunately could not retrieve the author.",console.log(t)}));case 2:case"end":return o.stop()}}),o)})))()},addBook:function(){var t={isbn:this.isbn,title:this.title,author:this.author};this.$store.commit("ADD_BOOK",t)}}}),l=o(79),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("b-overlay",{attrs:{show:t.loading,rounded:"sm"}},[e("b-card",{staticClass:"mb-3"},[e("b-card-text",[e("b-form-group",{attrs:{label:"ISBN:","label-cols-sm":"2"}},[e("b-form-input",{attrs:{placeholder:"ISBN"},model:{value:t.isbn,callback:function(e){t.isbn=e},expression:"isbn"}}),t._v(" "),e("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showErrorAlert,callback:function(e){t.showErrorAlert=e},expression:"showErrorAlert"}},[t._v("\n          "+t._s(t.alertText)+"\n        ")]),t._v(" "),e("b-button",{staticClass:"float-right mt-2 getBook",attrs:{variant:"secondary",disabled:!t.isbn},on:{click:t.getBook}},[t._v("Get book details")])],1),t._v(" "),e("b-form-group",{attrs:{label:"Title:","label-cols-sm":"2"}},[e("b-form-input",{attrs:{placeholder:"Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Author:","label-cols-sm":"2"}},[e("b-form-input",{attrs:{placeholder:"Author"},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}})],1),t._v(" "),e("b-button",{staticClass:"mb-3 addBook",attrs:{variant:"primary"},on:{click:t.addBook}},[t._v("Add Book")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);